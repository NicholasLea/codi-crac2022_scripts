# The 2021 CODI/CRAC Shared Task on Anaphoric Reference in Dialogue: A Quick Intro

  Sopan Khosla, Ramesh Manuvinakurike, Vincent Ng, Massimo Poesio, Michael Strube, Juntao Yu, Carolyn RosÃ©

  https://competitions.codalab.org/competitions/30312

Version 1.0, 2021/06/15

The objective of this  shared task is to go above and beyond the simple cases of coreference resolution in written text on which NLP has mostly focused so far, which  arguably overestimate the performance of current SOTA models.

## 1. The tasks

This shared task is composed of   three sub-tasks:

### Resolution of anaphoric identity and non-referring expression identification.

  This subtask covers the task of identifying coreference chains in text familiar from the CONLL 2011 and 2012 shared tasks:

  - [Mary]_i bought [a new dress]_j but [it]_j didn't fit [her]_i.

  but using a more comprehensive notion of identity anaphora which includes also, for instance,  cases of plural anaphoric reference in which the antecedents are introduced by separate mentions (split antecedent anaphora):

  - [Mary]_i met [John]_j. [They]_{i,j} went to dinner.

  And including singletons.
  In all of these cases, the task of the system is to link mentions to entities (coreference chains), just as in the CONLL Coreference Shared Tasks, except that singletons have to be recognized as well and assigned to their own coreference chains.
      
  In addition, both non-referring markables and singletons are covered by the annotation, so that systems also have to classify such markables as non-referring.

  - [It] is 4pm.

###  Resolution of bridging references.

   This is the task of identifying associative anaphoric references - references to entities related to already introduced entities:

   - Mary walked towards [the house]. She opened [the door].

   The objective of the task in this case is to identify the ANCHOR - the entity to which the bridging reference is referring to. 

### Resolution of discourse deixis/abstract anaphora.

  This is a generalization of the event anaphora resolution task from Ontonotes:

  - John finally finished writing the book. [That] happened on May 1st.

  but covering also cases when anaphoric  mentions refer to  abstract objects other than events:

  - John finally finished writing the book. [That]'s not possible.

 Discourse deixis is handled just as identity anaphora, except that the antecedents are defined as the utterances evoking the objects.

You have the option to participate in one or more of these sub-tasks.


## 2. Data and annotation scheme

###  Development and test data

Data from four dialogue corpora have been annotated for development and test:

- The [AMI corpus](https://groups.inf.ed.ac.uk/ami/corpus/) of multi-user meeting recordings.

- The [LIGHT corpus](https://parl.ai/projects/light/) from Parl.AI.
  This is a corpus of dialogues between participants to a text-based fantasy
  adventure game.

- The [Persuasion for Good corpus](https://convokit.cornell.edu/documentation/persuasionforgood.html) of online conversations generated by Amazon Mechanical Turk workers, where one participant (the persuader) tries to convince the other (the persuadee) to donate to a charity.

- The [Switchboard dialogue act corpus](https://convokit.cornell.edu/documentation/switchboard.html), a subset of the [Switchboard corpus](https://catalog.ldc.upenn.edu/LDC2002S06) of telephone conversations between two participants on a range of topics annotated with dialogue acts.

All the data have been annotated according to the [ARRAU Corpus annotation scheme](http://www.arrauproject.org)

###  Training data

The documents in the [ARRAU corpus](http://www.arrauproject.org), already used for [the CRAC 2018 Shared Task on Anaphora Resolution with the ARRAU corpus](http://dali.eecs.qmul.ac.uk/events/crac18) can be used as  training data. ARRAU consists of documents from several genres, including three conversational corpora:

- the [ TRAINS 1993 spoken dialogue corpus](https://catalog.ldc.upenn.edu/LDC95S25) of task-oriented dialogues

- the smaller TRAINS-91 corpus collected as a pilot for TRAINS-1993, will be used as one of the development datasets.

- the [Pear Stories corpus](http://pearstories.org/) consisting of recordings of the narration by  the subjects of a film (the 'Pear Stories' film).

as well as two non-dialogue genres:

- the documents in the [RST Discourse Treebank](https://catalog.ldc.upenn.edu/LDC2002T07), about 1/3 of the news articles in the WSJ portion of the Penn Treebank; 

- the documents from [the GNOME corpus](https://cswww.essex.ac.uk/Research/nle/corpora/GNOME/) 

## 3. The phases

There will be two main phases for the shared task, and the test phrase will be further divided into a predicted and gold phase. Please look at the Codalab site for exact dates as these may change.

###  Development phase

During the development phase, the training data from ARRAU will be made available, as well as gold versions of the dev subsets of the four main corpora.

###  Test phase

 The test phase will be divided in two parts: evaluation on predicted data (no markables supplied), and evaluation on gold markables (markables supplied).
 
## 4. Input and output formats

The datasets for shared task will  be released in `exploded' version of the Universal Anaphora format, CONLL-UA, which is an extension of the CONLL-U format developed for Universal Dependencies. In this format, separate columns are used to represent Identity, Bridging and Discourse Deixis information as discussed below.
  

###  General information

 Each sub-corpus is contained in a single file.
 The first line of this file specifies the columns in the full CONLL-UA format. **NB: Not all these columns are used in the documents of the shared task!**

```
# global.columns = ID FORM LEMMA UPOS XPOS FEATS HEAD DEPREL DEPS MISC IDENTITY BRIDGING DISCOURSE_DEIXIS REFERENCE NOM_SEM
```

 Then each document begins with a line specifying the ID of the document:

```
# newdoc id = light_dev/episode_6686
```

   After that, each turn in the dialogue recorded in  that document is started by a line specifying the turn ID, followed by a line specifying the speaker, and then one line per utterance:

```
# turn_id = episode_6686-t1
# speaker = member
```

   And then a series of line for each utterance:

```
# sent_id = episode_6686-2
# text = If I can not find my way out of this cave , who will replace me working in the tower ?
21    If       _  _  _  _  _  _  _  _  _                                                                                                           _  _  _  
22    I        _  _  _  _  _  _  _  _  (EntityID=10|MarkableID=markable_156|Min=2|SemType=do)                                                      _  _  _  (MarkableID=markable_156|Entity_Type=person|Genericity=generic-no)
23    can      _  _  _  _  _  _  _  _  _                                                                                                           _  _  _  
24    not      _  _  _  _  _  _  _  _  _                                                                                                           _  _  _
```

    an empty line separates each utterance, and each turn.

### Identity layer

 The IDENTITY column (column 11) contains information about the markables, their semantic type (whether they refer or not), the entity they refer to if referring, and their head (min). The information for each feature is provided in Feat=Val format; features  are separated by a |.

 The entity a (referring) mention refers to is indicated using the syntax

```
EntityID=18
```

 The Min feature specifies the token ID of the head token(s) for that markable.

 The values for the SemType feature are: dn (Discourse New: introduces a new entity), do (Discourse Old: refers back to an entity already introduced), expletive (vacuous non-referring expression, as in [it] is 4pm), idiom (idiomatic, non referring markable, as in You are [the bees' knees]), predicate (for predicative NPs, as in John is [a doctor]), quantifier (for non-referring quantifiers, as in [Nobody] came) and coordination.

 This information is stored on the line of the first token belonging to that markable; the end is marked by a closed parenthesis on the line of the last token in that markable.
 The following example from Light dev illustrates the use of the IDENTITY column. 

```
# turn_id = episode_6686-t3
# speaker = member
# sent_id = episode_6686-7
# text = A special moss grows here in this cave .
72    A        _  _  _  _  _  _  _  _  (EntityID=18|MarkableID=markable_132|Min=54|SemType=dn     _                                                                            _  _  (MarkableID=markable_132|Entity_Type=concrete|Genericity=generic-no
73    special  _  _  _  _  _  _  _  _  _                                                          _                                                                            _  _  
74    moss     _  _  _  _  _  _  _  _  )                                                          _                                                                            _  _  )
75    grows    _  _  _  _  _  _  _  _  _                                                          _                                                                            _  _  
76    here     _  _  _  _  _  _  _  _  (EntityID=19|MarkableID=markable_162|Min=76,79|SemType=dn  (MarkableID=markable_162|Rel=poss|MentionAnchor=markable_47|EntityAnchor=13  _  _  (MarkableID=markable_162|Entity_Type=space|Genericity=generic-no
77    in       _  _  _  _  _  _  _  _  _                                                          _                                                                            _  _  
78    this     _  _  _  _  _  _  _  _  (EntityID=13|MarkableID=markable_90|Min=59|SemType=do      _                                                                            _  _  (MarkableID=markable_90|Entity_Type=space|Genericity=generic-no
79    cave     _  _  _  _  _  _  _  _  ))                                                         )                                                                            _  _  ))
80    .        _  _  _  _  _  _  _  _  _                                                          _                                                                            _  _  
```

### Split antecedents in the Identity layer

  Split antecedent anaphors are also represented  in the IDENTITY layer by encoding the atomic elements of the set using the ElementOf feature.
  In the following example, entity 24 (line 173) and entity 37 (line 176) are elements of set entity 38, the antecedent of markable 51.
  

```
# sent_id = episode_5785-14
# text = Whatever , Ill come with you if there s food !
171   Whatever  _  _  _  _  _  _  _  _  (EntityID=36-Pseudo|MarkableID=markable_239|Min=171|SemType=idiom)     _  _  _  (MarkableID=markable_239|Entity_Type=unknown|Genericity
=unknown)
172   ,         _  _  _  _  _  _  _  _  _                                                                      _  _  _  
173   Ill       _  _  _  _  _  _  _  _  (EntityID=24|MarkableID=markable_201|Min=114|SemType=do|ElementOf=38)  _  _  _  (MarkableID=markable_201|Entity_Type=person|Genericity=
generic-no)
174   come      _  _  _  _  _  _  _  _  _                                                                      _  _  _  
175   with      _  _  _  _  _  _  _  _  _                                                                      _  _  _  
176   you       _  _  _  _  _  _  _  _  (EntityID=37|MarkableID=markable_27|Min=117|SemType=dn|ElementOf=38)   _  _  _  (MarkableID=markable_27|Entity_Type=unknown|Genericity=unknown)
177   if        _  _  _  _  _  _  _  _  _                                                                      _  _  _  
178   there     _  _  _  _  _  _  _  _  (EntityID=12|MarkableID=markable_200|Min=119|SemType=do)               _  _  _  (MarkableID=markable_200|Entity_Type=concrete|Genericity=operator-conditional)
179   s         _  _  _  _  _  _  _  _  _                                                                      _  _  _  
180   food      _  _  _  _  _  _  _  _  (EntityID=28|MarkableID=markable_229|Min=121|SemType=do)               _  _  _  (MarkableID=markable_229|Entity_Type=concrete|Genericity=generic-yes)
181   !         _  _  _  _  _  _  _  _  _                                                                      _  _  _  

# sent_id = episode_5785-15
# text = Can we take the scenic route so we can avoid the kings men ?
182   Can     _  _  _  _  _  _  _  _  _                                                                                                                   _                                                                                   _  _  
183   we      _  _  _  _  _  _  _  _  (EntityID=38|MarkableID=markable_51|Min=124|SemType=do)                                                             _                                                                                   _  _  (MarkableID=markable_51|Entity_Type=person|Genericity=generic-no)
184   take    _  _  _  _  _  _  _  _  _                                                                                                                   _
```


### Bridging layer

Information about bridging references in the bridging layer are represented in the BRIDGING column, column 12.
Bridging references are represented as markables in this column using the same bracket syntax used for markables in the IDENTITY column.
The features of bridging markables, apart from MarkableId, include EntityAnchor (the entity referred to), MentionAnchor (the mention of this entity), and Rel (the relation).
In the following example, markable_45 (line 165), the entrance, is a bridging reference of type poss (part of) to entity 13, the cave, last referenced by markable_77. 

```
# turn_id = episode_6686-t5
# speaker = member
# sent_id = episode_6686-14
# text = I need to travel further into the cave .
153   I        _  _  _  _  _  _  _  _  (EntityID=10|MarkableID=markable_79|Min=133|SemType=do)  _  _  _  (MarkableID=markable_79|Entity_Type=person|Genericity=generic-no)
154   need     _  _  _  _  _  _  _  _  _                                                        _  _  _  
155   to       _  _  _  _  _  _  _  _  _                                                        _  _  _  
156   travel   _  _  _  _  _  _  _  _  _                                                        _  _  _  
157   further  _  _  _  _  _  _  _  _  _                                                        _  _  _  
158   into     _  _  _  _  _  _  _  _  _                                                        _  _  _  
159   the      _  _  _  _  _  _  _  _  (EntityID=13|MarkableID=markable_77|Min=140|SemType=do   _  _  _  (MarkableID=markable_77|Entity_Type=space|Genericity=generic-no
160   cave     _  _  _  _  _  _  _  _  )                                                        _  _  _  )
161   .        _  _  _  _  _  _  _  _  _                                                        _  _  _  

# sent_id = episode_6686-15
# text = The light from the entrance causes the moss here to grow very small .
162   The       _  _  _  _  _  _  _  _  (EntityID=24|MarkableID=markable_14|Min=146|SemType=dn       _                                                                         
   _  _  (MarkableID=markable_14|Entity_Type=concrete|Genericity=generic-no
163   light     _  _  _  _  _  _  _  _  _                                                            _                                                                         
   _  _  
164   from      _  _  _  _  _  _  _  _  _                                                            _                                                                         
   _  _  
165   the       _  _  _  _  _  _  _  _  (EntityID=25|MarkableID=markable_45|Min=146|SemType=dn       (MarkableID=markable_45|Rel=poss|MentionAnchor=markable_77|EntityAnchor=13   _  _  (MarkableID=markable_45|Entity_Type=space|Genericity=generic-no
166   entrance  _  _  _  _  _  _  _  _  ))                                                           )                                                                            _  _  ))
167   causes    _  _  _  _  _  _  _  _  _                                                            _                                                                            _  _  

```

### Discourse deixis layer

Information about discourse deixis in the dd layer are represented in the DISCOURSE_DEIXIS column, column 13.
Discourse deictic references are represented as markables in this column using the same bracket syntax used for markables in the IDENTITY column.
Their antecedents are utterances, also marked as markables in the DISCOURSE_DEIXIS column.
Please note that many discourse deictic references refer to multiple utterances, so the split antecedent format is used.

```
# sent_id = episode_5785-51
# text = There must be a peaceful way to move forward from this .
651   There     _  _  _  _  _  _  _  _  (EntityID=97-Pseudo|MarkableID=markable_93|Min=592|SemType=expletive)  _  _                                                            
    _  (MarkableID=markable_93|Entity_Type=unknown|Genericity=unknown)
652   must      _  _  _  _  _  _  _  _  _                                                                      _  _                                                            
    _  
653   be        _  _  _  _  _  _  _  _  _                                                                      _  _                                                            
    _  
654   a         _  _  _  _  _  _  _  _  (EntityID=98|MarkableID=markable_66|Min=602|SemType=dn                 _  _                                                            
    _  (MarkableID=markable_66|Entity_Type=abstract|Genericity=operator-modal
655   peaceful  _  _  _  _  _  _  _  _  _                                                                      _  _                                                            
    _  
656   way       _  _  _  _  _  _  _  _  _                                                                      _  _                                                            
    _  
657   to        _  _  _  _  _  _  _  _  _                                                                      _  _                                                            
    _  
658   move      _  _  _  _  _  _  _  _  _                                                                      _  _                                                            
    _  
659   forward   _  _  _  _  _  _  _  _  _                                                                      _  _                                                            
    _  
660   from      _  _  _  _  _  _  _  _  _                                                                      _  _                                                            
    _  
661   this      _  _  _  _  _  _  _  _  )(EntityID=99|MarkableID=markable_164|Min=602|SemType=dn)              _  (EntityID=10-DD|MarkableID=markable_164|Min=661,661|SemType=dn)  _  )(MarkableID=markable_164|Entity_Type=abstract|Genericity=generic-no)
662   .         _  _  _  _  _  _  _  _  _                                                                      _  _                                                                _  
```

### Semantic layer

 The NOM_SEM column contains information about the semantic interpretation of markables including semantic category (e.g., place / concrete) and genericity - this information can be ignored.

### Input format

 Separate test files will be  used for each of the three tasks.

- In Task 1, the objective is to supply missing information in the IDENTITY column.

- In Task 2, the objective is to supply the missing information in the BRIDGING column.

- In Task 3, the objective is to supply the missing information in the DISCOURSE_DEIXIS column.

During the Predicted Markables evaluation phase, no markables are provided for the relevant column; in other words, systems have to find the markables as well as  resolving the anaphoric relations.

During the Gold Markables evaluation phase, the markables will be provided.

### Output format

- For Task 1, the objective is to produce the EntityID of the markable, as well as the element of the set for split antecedent plurals. NB: non-referring expressions identification will not be evaluated.

- For Task 2, the objective is to produce the MentionAnchor for a bridging reference. Note: the EntityAnchor will be automatically recovered from the MentionAnchor.

- For Task 3, the objective is to find the EntityID for the markable, just as in the case of Task 1, except that in this case the antecedent is not introduced by a nominal.

## 4. The scorer

The new [Universal Anaphora scorer](https://github.com/juntaoy/universal-anaphora-scorer) will be used for the shared task.

- For Task 1, the [Evaluating coreference relations (including split-antecedents) and singletons](https://github.com/juntaoy/universal-anaphora-scorer/blob/main/README.md#evaluating-coreference-relations-include-split-antecedents-and-singletons) modality will be used. Non-referring expressions identification will not be scored.

  `python ua-scorer.py key system`

- For Task 2, the scorer will be called using the command

  `python ua-scorer.py key system keep_bridging`

- For Task 3, the scorer will be called using the command

  `python ua-scorer.py key system evaluate_discourse_deixis`

